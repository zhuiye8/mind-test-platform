prisma:query SELECT "public"."exams"."id", "public"."exams"."paper_id", "public"."exams"."teacher_id", "public"."exams"."public_uuid", "public"."exams"."title", "public"."exams"."question_ids_snapshot", "public"."exams"."shuffle_questions", "public"."exams"."password", "public"."exams"."start_time", "public"."exams"."end_time", "public"."exams"."duration_minutes", "public"."exams"."status"::text, "public"."exams"."created_at", "public"."exams"."updated_at", COALESCE("aggr_selection_0_ExamResult"."_aggr_count_results", 0) AS "_aggr_count_results" FROM "public"."exams" LEFT JOIN (SELECT "public"."exam_results"."exam_id", COUNT(*) AS "_aggr_count_results" FROM "public"."exam_results" WHERE 1=1 GROUP BY "public"."exam_results"."exam_id") AS "aggr_selection_0_ExamResult" ON ("public"."exams"."id" = "aggr_selection_0_ExamResult"."exam_id") WHERE ("public"."exams"."id" = $1 AND "public"."exams"."teacher_id" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."papers"."id", "public"."papers"."title", "public"."papers"."description" FROM "public"."papers" WHERE "public"."papers"."id" IN ($1) OFFSET $2
获取考试详情: 9a7a06d7-3408-4cac-aab9-2ab9a36dfc16, 题目数: 3
prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."exam_results"."id" FROM "public"."exam_results" WHERE "public"."exam_results"."exam_id" = $1 OFFSET $2) AS "sub"
::1 - - [15/Aug/2025:09:51:55 +0000] "GET /api/teacher/exams/9a7a06d7-3408-4cac-aab9-2ab9a36dfc16 HTTP/1.1" 200 823 "http://localhost:5173/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Mobile Safari/537.36"
prisma:query SELECT "public"."exams"."id", "public"."exams"."title" FROM "public"."exams" WHERE ("public"."exams"."id" = $1 AND "public"."exams"."teacher_id" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."exam_results"."id" FROM "public"."exam_results" WHERE "public"."exam_results"."exam_id" = $1 OFFSET $2) AS "sub"
📄 使用偏移分页查询考试结果，考试: 9a7a06d7-3408-4cac-aab9-2ab9a36dfc16, page 1
prisma:query SELECT "public"."exam_results"."id", "public"."exam_results"."exam_id", "public"."exam_results"."participant_id", "public"."exam_results"."participant_name", "public"."exam_results"."answers", "public"."exam_results"."score", "public"."exam_results"."total_questions", "public"."exam_results"."answered_questions", "public"."exam_results"."total_time_seconds", "public"."exam_results"."scale_scores", "public"."exam_results"."ip_address", "public"."exam_results"."started_at", "public"."exam_results"."submitted_at", "public"."exam_results"."ai_session_id", "public"."exam_results"."emotion_analysis_id", "public"."exam_results"."timeline_data", "public"."exam_results"."voice_interactions", "public"."exam_results"."device_test_results" FROM "public"."exam_results" WHERE "public"."exam_results"."exam_id" = $1 ORDER BY "public"."exam_results"."submitted_at" DESC LIMIT $2 OFFSET $3
::1 - - [15/Aug/2025:09:51:55 +0000] "GET /api/teacher/exams/9a7a06d7-3408-4cac-aab9-2ab9a36dfc16/results HTTP/1.1" 200 3986 "http://localhost:5173/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Mobile Safari/537.36"
prisma:query SELECT "public"."exam_results"."id", "public"."exam_results"."exam_id", "public"."exam_results"."participant_id", "public"."exam_results"."participant_name", "public"."exam_results"."answers", "public"."exam_results"."score", "public"."exam_results"."total_questions", "public"."exam_results"."answered_questions", "public"."exam_results"."total_time_seconds", "public"."exam_results"."scale_scores", "public"."exam_results"."ip_address", "public"."exam_results"."started_at", "public"."exam_results"."submitted_at", "public"."exam_results"."ai_session_id", "public"."exam_results"."emotion_analysis_id", "public"."exam_results"."timeline_data", "public"."exam_results"."voice_interactions", "public"."exam_results"."device_test_results" FROM "public"."exam_results" WHERE ("public"."exam_results"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."exams"."id", "public"."exams"."paper_id", "public"."exams"."teacher_id", "public"."exams"."public_uuid", "public"."exams"."title", "public"."exams"."question_ids_snapshot", "public"."exams"."shuffle_questions", "public"."exams"."password", "public"."exams"."start_time", "public"."exams"."end_time", "public"."exams"."duration_minutes", "public"."exams"."status"::text, "public"."exams"."created_at", "public"."exams"."updated_at" FROM "public"."exams" WHERE "public"."exams"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."teachers"."id", "public"."teachers"."teacher_id", "public"."teachers"."name", "public"."teachers"."password_hash", "public"."teachers"."created_at", "public"."teachers"."updated_at" FROM "public"."teachers" WHERE "public"."teachers"."id" IN ($1) OFFSET $2
[AI控制器] 教师 T2025001 请求生成考试结果 294a69ab-492a-49be-bcc6-d1a84b06cf79 的AI报告
prisma:query SELECT "public"."exam_results"."id", "public"."exam_results"."exam_id", "public"."exam_results"."participant_id", "public"."exam_results"."participant_name", "public"."exam_results"."answers", "public"."exam_results"."score", "public"."exam_results"."total_questions", "public"."exam_results"."answered_questions", "public"."exam_results"."total_time_seconds", "public"."exam_results"."scale_scores", "public"."exam_results"."ip_address", "public"."exam_results"."started_at", "public"."exam_results"."submitted_at", "public"."exam_results"."ai_session_id", "public"."exam_results"."emotion_analysis_id", "public"."exam_results"."timeline_data", "public"."exam_results"."voice_interactions", "public"."exam_results"."device_test_results" FROM "public"."exam_results" WHERE ("public"."exam_results"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."exams"."id", "public"."exams"."paper_id", "public"."exams"."teacher_id", "public"."exams"."public_uuid", "public"."exams"."title", "public"."exams"."question_ids_snapshot", "public"."exams"."shuffle_questions", "public"."exams"."password", "public"."exams"."start_time", "public"."exams"."end_time", "public"."exams"."duration_minutes", "public"."exams"."status"::text, "public"."exams"."created_at", "public"."exams"."updated_at" FROM "public"."exams" WHERE "public"."exams"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."papers"."id", "public"."papers"."teacher_id", "public"."papers"."title", "public"."papers"."description", "public"."papers"."scale_type", "public"."papers"."show_scores", "public"."papers"."scale_config", "public"."papers"."created_at", "public"."papers"."updated_at" FROM "public"."papers" WHERE "public"."papers"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."questions"."id", "public"."questions"."paper_id", "public"."questions"."scale_id", "public"."questions"."question_order", "public"."questions"."title", "public"."questions"."options", "public"."questions"."question_type", "public"."questions"."display_condition", "public"."questions"."score_value", "public"."questions"."is_scored", "public"."questions"."created_at", "public"."questions"."updated_at" FROM "public"."questions" WHERE "public"."questions"."paper_id" IN ($1) ORDER BY "public"."questions"."question_order" ASC OFFSET $2
prisma:query SELECT "public"."question_responses"."id", "public"."question_responses"."exam_result_id", "public"."question_responses"."question_id", "public"."question_responses"."question_order", "public"."question_responses"."response_value", "public"."question_responses"."response_score", "public"."question_responses"."question_displayed_at", "public"."question_responses"."response_submitted_at", "public"."question_responses"."time_to_answer_seconds", "public"."question_responses"."created_at" FROM "public"."question_responses" WHERE "public"."question_responses"."exam_result_id" IN ($1) ORDER BY "public"."question_responses"."question_order" ASC OFFSET $2
[AI分析] 生成报告，会话ID: c0b6ddb7-2682-4e3d-82b9-f9147c0bca34
[AI分析] 考试结果ID: 294a69ab-492a-49be-bcc6-d1a84b06cf79
[AI分析] AI会话ID: c0b6ddb7-2682-4e3d-82b9-f9147c0bca34
[AI分析] questionResponses数量: 0
[AI分析] 发送题目数据，共 0 题
[AI分析] ⚠️ 警告：没有找到题目响应数据
[AI分析] 考试信息: {
  examId: '9a7a06d7-3408-4cac-aab9-2ab9a36dfc16',
  paperId: '619c590d-bb70-46ce-abc6-0dcf3bf762e6',
  questionsCount: 3,
  examResultId: '294a69ab-492a-49be-bcc6-d1a84b06cf79'
}
::1 - - [15/Aug/2025:09:51:58 +0000] "POST /api/teacher/ai/exam-results/294a69ab-492a-49be-bcc6-d1a84b06cf79/generate-report HTTP/1.1" 500 87 "http://localhost:5173/" "Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Mobile Safari/537.36"